SET FOREIGN_KEY_CHECKS=0;

DELETE FROM galaxy_autotest_yunxin.t_product_category;

INSERT INTO `t_product_category` (`id`, `uuid`, `product_lv_1_code`, `product_lv_1_name`, `product_lv_2_code`, `product_lv_2_name`, `product_lv_3_code`, `product_lv_3_name`, `pre_process_interface_url`, `pre_process_script`, `status`, `script_md_5_version`, `date_field_one`, `date_field_two`, `date_field_three`, `long_field_one`, `long_field_two`, `long_field_three`, `string_field_one`, `string_field_two`, `string_field_three`, `decimal_field_one`, `decimal_field_two`, `decimal_field_three`)
VALUES
  (1, 'UUID', 'zhongan', '众安保险', 'modify-repaymentPlan', '变更还款计划', 'SXH-YQHK', '随心还-延期还款', 'modify-repaymentPlan/zhongan/SXH-YQHK', 'public boolean evaluate(FinancialContractSnapshot financialContractSnapshot, ContractSnapshot contractSnapshot,\n							List<PaymentPlanSnapshot> assetSetSnapshotList, Map<String, String> parameters, Map\n										<String, String> postRequest) {\n		// 仅支持佰仟信贷合同\n		if (!financialContractSnapshot.isAllowFreewheelingRepayment()) {\n			return false;\n		}\n		try {\n			if (CollectionUtils.isEmpty(assetSetSnapshotList)) {\n				return false;\n			}\n			String requestData =(String) parameters.get(\"requestData\");\n			List<RepaymentPlanModifyRequestDataModel> models = JsonUtils.parseArray(requestData,\n					RepaymentPlanModifyRequestDataModel.class);\n			if (CollectionUtils.isEmpty(models) || models.size() != assetSetSnapshotList.size()) {\n				return false;\n			}\n			int globalMonDelta = 0;\n			for (int i = 0; i < assetSetSnapshotList.size(); i++) {\n				PaymentPlanSnapshot assetSetSnapshot = (PaymentPlanSnapshot)assetSetSnapshotList.get(i);\n				RepaymentPlanModifyRequestDataModel modifyRequestDataModel = (RepaymentPlanModifyRequestDataModel)models.get(i);\n				String asset_interest_principal_fingerPrint = modifyRequestDataModel\n						.asset_interest_principal_fingerPrint();\n				if (!assetSetSnapshot\n						.check_asset_interest_principal_fingerPrint(asset_interest_principal_fingerPrint)) {\n					return false;\n				}\n\n				if (assetSetSnapshot.is_immutable()) {\n					return false;\n				}\n\n				// 还款当日不允许变更\n				if (assetSetSnapshot.is_today_repayment_plan()) {\n					return false;\n				}\n\n				PaymentPlanExtraChargeSnapshot assetSetExtraChargeSnapshot = assetSetSnapshot\n						.getAssetSetExtraChargeSnapshot();\n				if (null == assetSetExtraChargeSnapshot) {\n					return false;\n				}\n\n				String assetExtraFeeFingerPrint = modifyRequestDataModel.assetExtraFeeFingerPrint();\n				if (!assetSetExtraChargeSnapshot.check_assetExtraFeeFingerPrint(assetExtraFeeFingerPrint)) {\n					return false;\n				}\n\n				// 延期还款仅仅变更月份\n				Date assetRecycleDate = assetSetSnapshot.getAssetRecycleDate();\n				Date model_date = modifyRequestDataModel.getDate();\n				int snapshot_day = DateUtils.day(assetRecycleDate);\n				int model_day = DateUtils.day(model_date);\n				if (snapshot_day != model_day) {\n					return false;\n				}\n				// FIXME 还款日为29/30/31日时不得延期\n				if (Arrays.asList(29, 30, 31).contains(model_day)) {\n					return false;\n				}\n\n				Date addOneMonth = DateUtils.addMonths(assetRecycleDate, 1);\n				boolean one_month_late = DateUtils.isSameMonth(addOneMonth, model_date);\n				Date addTwoMonths = DateUtils.addMonths(assetRecycleDate, 2);\n				boolean two_months_late = DateUtils.isSameMonth(addTwoMonths, model_date);\n\n				if (!one_month_late && !two_months_late) {\n					return false;\n				}\n				int monDelta = one_month_late ? 1 : 2;\n				// 日期变化\n				if (globalMonDelta == 0) {\n					globalMonDelta = monDelta;\n					continue;\n				}\n				// 日期变化量相同\n				if (globalMonDelta != monDelta) {\n					return false;\n				}\n			}\n			return true;\n		} catch (Exception e) {\n			e.printStackTrace();\n			return false;\n		}\n	}', 1, 'md5', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);

SET FOREIGN_KEY_CHECKS=1;