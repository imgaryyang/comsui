webpackJsonp([11,23],{13:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.REGEXPS={MOBILE:/^1[3|4|5|7|8][0-9]\d{4,8}$/,PHONE_EXT:/^(0[0-9]{2,3}-)?([2-9][0-9]{6,7})([*#][0-9]{1,4})?$/,NUMBER:/^[0-9]+$/,POSITIVE_INTEGER:/^[1-9][0-9]*$/,MONEY:/^[0-9]+[\.]?[0-9]{0,3}$/,NON_NEGATIVE_INTEGER:/^[0-9]+$/,CHINESE_CHARACTOR:/[\u4e00-\u9fa5]{1,}/,ENGLISH_NAME:/^[A-Za-z,.]+$/,NUMBER_AND_ALPHABET:/^[A-Za-z0-9]+$/,INCLUDE_CHINESE_CHARACTOR:/[\u4e00-\u9fa5]{1,}/,INCLUDE_NUMBER:/[0-9]/,ID_CARD:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/};t.contact=function(e){return n.PHONE_EXT.test(e)||n.MOBILE.test(e)},t.positiveNumber=function(e){return""!=e&&+e>0},t.nonNegativeNumber=function(e){return""!=e&&+e>=0},t.excludeChineseCharactor=function(e){return!n.CHINESE_CHARACTOR.test(e)},t.idCard=function(e){var t=n.ID_CARD.test(e);if(!t)return!1;if(18==e.length){var a=7*(new Number(e.charAt(0))+new Number(e.charAt(10)))+9*(new Number(e.charAt(1))+new Number(e.charAt(11)))+10*(new Number(e.charAt(2))+new Number(e.charAt(12)))+5*(new Number(e.charAt(3))+new Number(e.charAt(13)))+8*(new Number(e.charAt(4))+new Number(e.charAt(14)))+4*(new Number(e.charAt(5))+new Number(e.charAt(15)))+2*(new Number(e.charAt(6))+new Number(e.charAt(16)))+1*new Number(e.charAt(7))+6*new Number(e.charAt(8))+3*new Number(e.charAt(9)),i=a%11,r="10X98765432",s=r.charAt(i);t=s===e.charAt(17)||"A"===e.charAt(17)}return t}},684:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(2),s=a(r);t.default={components:{SystemOperateLog:n(8),EditBankModal:n(299),EditInfoModal:n(1566)},data:function(){return{fetching:!1,supplier:{},bankCards:[],sisms:[],editInfoModal:{model:{},show:!1},bankModal:{show:!1,isUpdate:!1,model:{}},isShowPageControl:!1,pageConds:{pageIndex:1,perPageRecordNumber:12}}},computed:{uuid:function(){return this.$route.params.uuid},drawerMsg:function(){return this.isShowPageControl?"收起":"展开"},showDataList:function(){return this.isShowPageControl?this.paginationList:this.paginationList.slice(0,3)},paginationList:function(){var e=this.pageConds,t=e.pageIndex,n=e.perPageRecordNumber,a=(t-1)*n,i=a+n;return this.sisms?this.sisms.slice(a,i):this.sisms}},activated:function(){this.$route.params.uuid&&this.fetchDetail()},methods:{fetchDetail:function(){var e=this;this.fetching||(this.fetching=!0,(0,i.ajaxPromise)({url:"/supplier/detail",data:{uuid:this.uuid}}).then(function(t){e.supplier=t.supplier||{},e.bankCards=t.bankCards||[],e.sisms=t.sisms||[]}).catch(function(e){s.default.open(e)}).then(function(){e.fetching=!1}))},handlerEdit:function(){var e=this.editInfoModal;e.model={supplierUuid:this.supplier.uuid,supplierName:this.supplier.name,legalPerson:this.supplier.legalPerson,businessLicence:this.supplier.businessLicence},e.show=!0},refreshDetail:function(){this.fetchDetail(),this.$refs.sysLog.fetch()},createBank:function(){var e=this.bankModal;e.model={},e.isUpdate=!1,e.show=!0},deleteBank:function(e){var t=this;return 1==this.bankCards.length?void s.default.open("银行卡只剩一张，不可删除"):void s.default.open("确认删除该银行信息","提示",[{text:"确认",type:"success",handler:function(){(0,i.ajaxPromise)({url:"/bankCard/delete",data:{uuid:e.uuid}}).then(function(e){s.default.once("closed",function(){return t.refreshDetail()}),s.default.open("操作成功")}).catch(function(e){s.default.open(e)})}},{text:"关闭",handler:function(){return s.default.close()}}])},editBank:function(e){var t=this.bankModal;t.model=Object.assign({},e),t.isUpdate=!0,t.show=!0}}}},1768:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fetching,expression:"fetching"}],staticClass:"scroller"},[n("Breadcrumb",{attrs:{routes:[{title:"供应商管理"},{title:"供应商信息详情"}]}},[e.supplier?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handlerEdit}},[e._v("编辑")]):e._e()]),e._v(" "),n("div",{staticClass:"col-layout-detail"},[n("div",{staticClass:"top"},[n("div",{staticClass:"block"},[n("h5",{staticClass:"hd"},[e._v("供应商信息")]),e._v(" "),n("div",{staticClass:"bd"},[n("div",{staticClass:"col"},[n("p",[e._v("供应商全称: "+e._s(e.supplier.name))]),e._v(" "),n("p",[e._v("公司法人: "+e._s(e.supplier.legalPerson))]),e._v(" "),n("p",[e._v("公司营业执照: "+e._s(e.supplier.businessLicence))])])])])])]),e._v(" "),n("div",{staticClass:"row-layout-detail"},[n("div",{staticClass:"block"},[n("h5",{staticClass:"hd"},[e._v("\n                        银行信息\n                        "),n("el-button",{staticStyle:{padding:"0 10px","font-weight":"normal"},attrs:{type:"text"},on:{click:e.createBank}},[e._v("新增银行卡")])]),e._v(" "),n("div",{staticClass:"bd"},[n("el-table",{staticClass:"td-15-padding th-8-15-padding no-th-border",attrs:{data:e.bankCards,stripe:"",border:""}},[n("el-table-column",{attrs:{prop:"accountNo",label:"账户号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"accountName",label:"账户名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bankName",label:"开户行"}}),e._v(" "),n("el-table-column",{attrs:{label:"开户行所在地"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(e._s(e.row.province)+" "+e._s(e.row.city))])},staticRenderFns:[]}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return[n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.editBank(e.row)}}},[e._v("编辑")]),e._v(" "),n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.deleteBank(e.row)}}},[e._v("删除")])]},staticRenderFns:[]}})])])]),e._v(" "),n("div",{staticClass:"block"},[n("h5",{staticClass:"hd"},[e._v("业务信息")]),e._v(" "),n("div",{staticClass:"bd"},[n("el-table",{staticClass:"td-15-padding th-8-15-padding no-th-border",attrs:{data:e.sisms,stripe:"",border:""}},[n("el-table-column",{attrs:{label:e.$utils.locale("financialContract.name"),prop:"financialContractName"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$utils.locale("financialContract.no")},inlineTemplate:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:e.ctx+"#/financial/contract/"+e.row.financialContractUuid+"/detail"}},[e._v(e._s(e.row.financialContractNo))])},staticRenderFns:[]}}),e._v(" "),n("el-table-column",{attrs:{label:"贷款合同",prop:"contractNo"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:e.ctx+"#/data/contracts/detail?id="+e.row.contractId}},[e._v(e._s(e.row.contractNo))])},staticRenderFns:[]}})])]),e._v(" "),e.sisms.length?n("div",{staticClass:"ft text-align-center"},[n("a",{staticClass:"drawer",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.isShowPageControl=!e.isShowPageControl}}},[n("span",{staticClass:"msg"},[e._v(e._s(e.drawerMsg))]),e._v(" "),n("i",{staticClass:"icon icon-up-down",class:{active:e.isShowPageControl}})]),e._v(" "),e.isShowPageControl?n("PageControl",{directives:[{name:"model",rawName:"v-model",value:e.pageConds.pageIndex,expression:"pageConds.pageIndex"}],attrs:{size:e.sisms.length,"per-page-record-number":e.pageConds.perPageRecordNumber},domProps:{value:e.pageConds.pageIndex},on:{input:function(t){e.pageConds.pageIndex=t}}}):e._e()]):e._e()]),e._v(" "),n("div",{staticClass:"block"},[n("SystemOperateLog",{ref:"sysLog",attrs:{"for-object-uuid":e.uuid}})])])]),e._v(" "),n("EditInfoModal",{directives:[{name:"model",rawName:"v-model",value:e.editInfoModal.show,expression:"editInfoModal.show"}],attrs:{model:e.editInfoModal.model},domProps:{value:e.editInfoModal.show},on:{submit:e.refreshDetail,input:function(t){e.editInfoModal.show=t}}}),e._v(" "),n("EditBankModal",{directives:[{name:"model",rawName:"v-model",value:e.bankModal.show,expression:"bankModal.show"}],attrs:{outerIdentifier:e.uuid,model:e.bankModal.model},domProps:{value:e.bankModal.show},on:{submit:e.refreshDetail,input:function(t){e.bankModal.show=t}}})])},staticRenderFns:[]}},1564:function(e,t,n){var a,i;n(1200),a=n(684);var r=n(1768);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,e.exports=a},1200:function(e,t){},219:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(2),s=a(r),o=n(1),l=n(20);n(13);t.default={props:{value:Boolean,model:{type:Object,default:{}},outerIdentifier:{type:String,default:""},identityOrdinal:{type:Number,default:0},isFromCreate:{type:Boolean,default:!1}},data:function(){var e=function(e,t,n){/^\d+$/g.test(t)?n():n(new Error("银行账户号格式不正确"))};return{visible:this.value,submitting:!1,fields:Object.assign({},this.model),rules:{bankCode:{required:!0,message:" ",trigger:"change"},accountNo:{required:!0,validator:e,trigger:"blur"},accountName:{required:!0,message:" ",trigger:"blur"},provinceCode:{required:!0,message:" ",trigger:"blur"},cityCode:{required:!0,message:" ",trigger:"blur"}}}},watch:{visible:function(e){this.$emit("input",e),e||this.$refs.form.resetFields()},value:function(e){this.visible=e},model:function(e){this.fields=Object.assign({bankCode:"",accountNo:"",provinceCode:"",province:"",cityCode:"",city:"",accountName:""},e)}},computed:i({},(0,l.mapState)({bankNames:function e(t){var n=[],e=t.financialContract.bankNames;return Object.keys(e).forEach(function(t){n.push({key:t,value:e[t]})}),n}})),beforeMount:function(){this.$store.dispatch("getBankNames")},methods:{getBankName:function(e){var t=this.bankNames.findIndex(function(t){return t.key===e});return this.bankNames[t].value},submit:function(){var e=this;this.$refs.form.validate(function(t){if(t){var n=Object.assign({},e.fields);if(n.bankName=e.getBankName(n.bankCode),e.isFromCreate)return e.visible=!1,void e.$emit("submitBank",n);var a=n.uuid;e.submitting=!0,(0,o.ajaxPromise)({url:a?"/bankCard/modify":"/bankCard/add",data:i({outerIdentifier:e.outerIdentifier,identityOrdinal:e.identityOrdinal},n)}).then(function(t){e.visible=!1,e.$emit("submit")}).catch(function(e){s.default.open(e)}).then(function(){e.submitting=!1})}})}}}},280:function(e,t){},299:function(e,t,n){var a,i;n(280),a=n(219);var r=n(309);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,e.exports=a},309:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{directives:[{name:"model",rawName:"v-model",value:e.visible,expression:"visible"}],domProps:{value:e.visible},on:{input:function(t){e.visible=t}}},[n("ModalHeader",{attrs:{title:e.fields.uuid?"编辑银行卡":"新增银行卡"}}),e._v(" "),n("ModalBody",{attrs:{align:"left"}},[n("el-form",{ref:"form",staticClass:"sdf-form sdf-modal-form",attrs:{model:e.fields,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"银行账户名",prop:"accountName",required:""}},[n("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fields.accountName,expression:"fields.accountName"}],staticClass:"middle",domProps:{value:e.fields.accountName},on:{input:function(t){e.fields.accountName=t}}})]),e._v(" "),n("el-form-item",{attrs:{label:"银行账户号",prop:"accountNo",required:""}},[n("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fields.accountNo,expression:"fields.accountNo"}],staticClass:"middle",domProps:{value:e.fields.accountNo},on:{input:function(t){e.fields.accountNo=t}}})]),e._v(" "),n("el-form-item",{attrs:{label:"开户行",prop:"bankCode",required:""}},[n("el-select",{directives:[{name:"model",rawName:"v-model",value:e.fields.bankCode,expression:"fields.bankCode"}],staticClass:"middle",attrs:{clearable:""},domProps:{value:e.fields.bankCode},on:{input:function(t){e.fields.bankCode=t}}},e._l(e.bankNames,function(e){return n("el-option",{attrs:{label:e.value,value:e.key}})}))]),e._v(" "),n("el-form-item",{attrs:{label:"开户行所在地",required:""}},[n("select-address",[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{prop:"provinceCode",required:""}},[n("select-province",{directives:[{name:"model",rawName:"v-model",value:e.fields.provinceCode,expression:"fields.provinceCode"}],domProps:{value:e.fields.provinceCode},on:{input:[function(t){e.fields.provinceCode=t},function(t){e.fields.province=arguments[1]}]}})])]),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{prop:"cityCode",required:""}},[n("select-city",{directives:[{name:"model",rawName:"v-model",value:e.fields.cityCode,expression:"fields.cityCode"}],attrs:{"province-code":e.fields.provinceCode},domProps:{value:e.fields.cityCode},on:{input:[function(t){e.fields.cityCode=t},function(t){e.fields.city=arguments[1]}]}})])])])])])]),e._v(" "),n("ModalFooter",[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"success",loading:e.submitting},on:{click:e.submit}},[e._v("确定")])])])},staticRenderFns:[]}},686:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(2),s=a(r),o=n(799),l=a(o);t.default={mixins:[l.default],props:{model:{type:Object,default:{}}},watch:{model:function(e){this.currentModel=Object.assign({supplierUuid:"",supplierName:"",legalPerson:"",businessLicence:""},e)}},data:function(){return{show:this.value,currentModel:Object.assign({},this.model),rules:{supplierName:{required:!0,message:" ",trigger:"blur"}}}},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){t&&(0,i.ajaxPromise)({url:"/supplier/modify",type:"post",data:e.currentModel}).then(function(t){s.default.once("closed",function(){e.show=!1,e.$emit("submit")}),s.default.open("编辑成功")}).catch(function(e){s.default.open(e)})})}}}},1566:function(e,t,n){var a,i;a=n(686);var r=n(1834);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,e.exports=a},1834:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{directives:[{name:"model",rawName:"v-model",value:e.show,expression:"show"}],domProps:{value:e.show},on:{input:function(t){e.show=t}}},[n("ModalHeader",{attrs:{title:"编辑供应商信息"}}),e._v(" "),n("ModalBody",{attrs:{align:"left"}},[n("el-form",{ref:"form",staticClass:"sdf-form",attrs:{rules:e.rules,"label-width":"120px",model:e.currentModel}},[n("el-form-item",{attrs:{label:"供应商全称",prop:"supplierName",required:""}},[n("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.currentModel.supplierName,expression:"currentModel.supplierName",modifiers:{trim:!0}}],domProps:{value:e.currentModel.supplierName},on:{input:function(t){e.currentModel.supplierName="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("el-form-item",{attrs:{label:"公司法人",prop:"legalPerson"}},[n("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.currentModel.legalPerson,expression:"currentModel.legalPerson",modifiers:{trim:!0}}],domProps:{value:e.currentModel.legalPerson},on:{input:function(t){e.currentModel.legalPerson="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("el-form-item",{attrs:{label:"公司营业执照",prop:"businessLicence"}},[n("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.currentModel.businessLicence,expression:"currentModel.businessLicence",modifiers:{trim:!0}}],domProps:{value:e.currentModel.businessLicence},on:{input:function(t){e.currentModel.businessLicence="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}}})])])]),e._v(" "),n("ModalFooter",[n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"success"},on:{click:e.submit}},[e._v("确定")])])])},staticRenderFns:[]}},799:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:{default:!1}},watch:{show:function(e){this.$emit("input",e),!e&&this.$refs.form&&this.$refs.form.resetFields()},value:function(e){this.show=e}},methods:{fetchSysLog:function(){var e=this.$parent.$refs.sysLog;e&&e.fetch()}}}},36:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"system-operate-log"},[n("h5",{staticClass:"hd"},[e._v(e._s(e.title))]),e._v(" "),n("div",{staticClass:"bd"},[n("el-table",{staticClass:"td-15-padding th-8-15-padding no-th-border",attrs:{data:e.dataSource.list,stripe:"",border:""}},[n("el-table-column",{attrs:{width:"60px",type:"index",label:"序号"}}),e._v(" "),n("el-table-column",{attrs:{width:"150px",prop:"occurTime",label:"操作发生时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"operateName",label:"操作员登录名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"recordContent",label:"操作内容"}})])]),e._v(" "),n("div",{staticClass:"ft clearfix"},[n("PageControl",{directives:[{name:"model",rawName:"v-model",value:e.pageConds.pageIndex,expression:"pageConds.pageIndex"}],attrs:{size:e.dataSource.size,"per-page-record-number":e.pageConds.perPageRecordNumber},domProps:{value:e.pageConds.pageIndex},on:{input:function(t){e.pageConds.pageIndex=t}}})])])},staticRenderFns:[]}},35:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=a(i);t.default={mixins:[r.default],props:{forObjectUuid:[String,Number],title:{default:"操作日志"}},data:function(){return{action:"/system-operate-log/query",pageConds:{pageIndex:1,perPageRecordNumber:5}}},computed:{queryConds:function(){return{objectUuid:this.forObjectUuid}},conditions:function(){return Object.assign({},this.queryConds,this.pageConds)}},methods:{fetch:function(){this.conditions.objectUuid&&this.getData({url:this.action,data:this.conditions})}}}},8:function(e,t,n){var a,i;a=n(35);var r=n(36);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,e.exports=a}});