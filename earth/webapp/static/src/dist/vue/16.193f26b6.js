webpackJsonp([16,23],{13:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.REGEXPS={MOBILE:/^1[3|4|5|7|8][0-9]\d{4,8}$/,PHONE_EXT:/^(0[0-9]{2,3}-)?([2-9][0-9]{6,7})([*#][0-9]{1,4})?$/,NUMBER:/^[0-9]+$/,POSITIVE_INTEGER:/^[1-9][0-9]*$/,MONEY:/^[0-9]+[\.]?[0-9]{0,3}$/,NON_NEGATIVE_INTEGER:/^[0-9]+$/,CHINESE_CHARACTOR:/[\u4e00-\u9fa5]{1,}/,ENGLISH_NAME:/^[A-Za-z,.]+$/,NUMBER_AND_ALPHABET:/^[A-Za-z0-9]+$/,INCLUDE_CHINESE_CHARACTOR:/[\u4e00-\u9fa5]{1,}/,INCLUDE_NUMBER:/[0-9]/,ID_CARD:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/};t.contact=function(e){return n.PHONE_EXT.test(e)||n.MOBILE.test(e)},t.positiveNumber=function(e){return""!=e&&+e>0},t.nonNegativeNumber=function(e){return""!=e&&+e>=0},t.excludeChineseCharactor=function(e){return!n.CHINESE_CHARACTOR.test(e)},t.idCard=function(e){var t=n.ID_CARD.test(e);if(!t)return!1;if(18==e.length){var r=7*(new Number(e.charAt(0))+new Number(e.charAt(10)))+9*(new Number(e.charAt(1))+new Number(e.charAt(11)))+10*(new Number(e.charAt(2))+new Number(e.charAt(12)))+5*(new Number(e.charAt(3))+new Number(e.charAt(13)))+8*(new Number(e.charAt(4))+new Number(e.charAt(14)))+4*(new Number(e.charAt(5))+new Number(e.charAt(15)))+2*(new Number(e.charAt(6))+new Number(e.charAt(16)))+1*new Number(e.charAt(7))+6*new Number(e.charAt(8))+3*new Number(e.charAt(9)),a=r%11,i="10X98765432",o=i.charAt(a);t=o===e.charAt(17)||"A"===e.charAt(17)}return t}},683:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(2),o=r(i);t.default={components:{EditBankModal:n(299)},data:function(){return{currentModel:{supplierName:"",legalPerson:"",businessLicence:"",bankInfo:""},rules:{supplierName:{required:!0,message:" ",trigger:"blur"}},bankModal:{show:!1,isUpdate:!1,curIndex:-1,model:{}}}},activated:function(){this.bankCards=[],this.currentModel={supplierName:"",legalPerson:"",businessLicence:"",bankInfo:""}},methods:{createBank:function(){var e=this.bankModal;e.model={},e.isUpdate=!1,e.show=!0},submit:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(0==e.bankCards.length)return void o.default.open("银行信息还未填写！");e.currentModel.bankInfo=JSON.stringify(e.bankCards),(0,a.ajaxPromise)({url:"/supplier/create",type:"post",data:e.currentModel}).then(function(t){o.default.once("closed",function(){return location.assign(e.ctx+"#/financial/customer/supplier?t="+(new Date).getTime())}),o.default.open("操作成功")}).catch(function(e){o.default.open(e)})}})},submitBank:function(e){var t=this.bankModal;t.isUpdate?this.bankCards[t.curIndex]=Object.assign(this.bankCards[t.curIndex],e):this.bankCards.push(e)},editBank:function(e,t){var n=this.bankModal;n.model=Object.assign({},e),n.isUpdate=!0,n.curIndex=t,n.show=!0},deleteBank:function(e,t){this.bankCards.splice(t,1)}}}},1242:function(e,t){},1563:function(e,t,n){var r,a;n(1242),r=n(683);var i=n(1837);a=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(a=r=r.default),"function"==typeof a&&(a=a.options),a.render=i.render,a.staticRenderFns=i.staticRenderFns,e.exports=r},1837:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"scroller"},[n("Breadcrumb",{attrs:{routes:[{title:"供应商管理"},{title:"供应商新增"}]}}),e._v(" "),n("el-form",{ref:"form",staticClass:"sdf-form",attrs:{rules:e.rules,"label-width":"120px",model:e.currentModel}},[n("el-form-item",{staticClass:"form-item-legend",attrs:{label:"供应商信息"}}),e._v(" "),n("el-form-item",{attrs:{label:"供应商全称",prop:"supplierName",required:""}},[n("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.currentModel.supplierName,expression:"currentModel.supplierName",modifiers:{trim:!0}}],staticClass:"long",domProps:{value:e.currentModel.supplierName},on:{input:function(t){e.currentModel.supplierName="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("el-form-item",{attrs:{label:"公司法人",prop:"legalPerson"}},[n("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.currentModel.legalPerson,expression:"currentModel.legalPerson",modifiers:{trim:!0}}],staticClass:"long",domProps:{value:e.currentModel.legalPerson},on:{input:function(t){e.currentModel.legalPerson="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("el-form-item",{attrs:{label:"公司营业执照",prop:"businessLicence"}},[n("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.currentModel.businessLicence,expression:"currentModel.businessLicence",modifiers:{trim:!0}}],staticClass:"long",domProps:{value:e.currentModel.businessLicence},on:{input:function(t){e.currentModel.businessLicence="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("el-form-item",{attrs:{label:"银行信息",prop:"bankInfo",required:""}},[[n("el-button",{staticStyle:{padding:"0 10px","font-weight":"normal"},attrs:{type:"text"},on:{click:e.createBank}},[e._v("新增银行卡")]),e._v(" "),n("el-table",{staticClass:"td-15-padding th-8-15-padding no-th-border",staticStyle:{width:"75%"},attrs:{data:e.bankCards,stripe:"",border:""}},[n("el-table-column",{attrs:{prop:"accountNo",label:"账户号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"accountName",label:"账户名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bankName",label:"开户行"}}),e._v(" "),n("el-table-column",{attrs:{label:"开户行所在地"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(e._s(e.row.province)+" "+e._s(e.row.city))])},staticRenderFns:[]}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return[n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.editBank(e.row,e.$index)}}},[e._v("编辑")]),e._v(" "),n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.deleteBank(e.row,e.$index)}}},[e._v("删除")])]},staticRenderFns:[]}})])]],!0),e._v(" "),n("el-form-item",{staticStyle:{"margin-top":"20px"}},[n("el-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])])])]),e._v(" "),n("EditBankModal",{directives:[{name:"model",rawName:"v-model",value:e.bankModal.show,expression:"bankModal.show"}],attrs:{isFromCreate:!0,model:e.bankModal.model},domProps:{value:e.bankModal.show},on:{submitBank:e.submitBank,input:function(t){e.bankModal.show=t}}})])},staticRenderFns:[]}},219:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2),o=r(i),s=n(1),l=n(20);n(13);t.default={props:{value:Boolean,model:{type:Object,default:{}},outerIdentifier:{type:String,default:""},identityOrdinal:{type:Number,default:0},isFromCreate:{type:Boolean,default:!1}},data:function(){var e=function(e,t,n){/^\d+$/g.test(t)?n():n(new Error("银行账户号格式不正确"))};return{visible:this.value,submitting:!1,fields:Object.assign({},this.model),rules:{bankCode:{required:!0,message:" ",trigger:"change"},accountNo:{required:!0,validator:e,trigger:"blur"},accountName:{required:!0,message:" ",trigger:"blur"},provinceCode:{required:!0,message:" ",trigger:"blur"},cityCode:{required:!0,message:" ",trigger:"blur"}}}},watch:{visible:function(e){this.$emit("input",e),e||this.$refs.form.resetFields()},value:function(e){this.visible=e},model:function(e){this.fields=Object.assign({bankCode:"",accountNo:"",provinceCode:"",province:"",cityCode:"",city:"",accountName:""},e)}},computed:a({},(0,l.mapState)({bankNames:function e(t){var n=[],e=t.financialContract.bankNames;return Object.keys(e).forEach(function(t){n.push({key:t,value:e[t]})}),n}})),beforeMount:function(){this.$store.dispatch("getBankNames")},methods:{getBankName:function(e){var t=this.bankNames.findIndex(function(t){return t.key===e});return this.bankNames[t].value},submit:function(){var e=this;this.$refs.form.validate(function(t){if(t){var n=Object.assign({},e.fields);if(n.bankName=e.getBankName(n.bankCode),e.isFromCreate)return e.visible=!1,void e.$emit("submitBank",n);var r=n.uuid;e.submitting=!0,(0,s.ajaxPromise)({url:r?"/bankCard/modify":"/bankCard/add",data:a({outerIdentifier:e.outerIdentifier,identityOrdinal:e.identityOrdinal},n)}).then(function(t){e.visible=!1,e.$emit("submit")}).catch(function(e){o.default.open(e)}).then(function(){e.submitting=!1})}})}}}},280:function(e,t){},299:function(e,t,n){var r,a;n(280),r=n(219);var i=n(309);a=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(a=r=r.default),"function"==typeof a&&(a=a.options),a.render=i.render,a.staticRenderFns=i.staticRenderFns,e.exports=r},309:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{directives:[{name:"model",rawName:"v-model",value:e.visible,expression:"visible"}],domProps:{value:e.visible},on:{input:function(t){e.visible=t}}},[n("ModalHeader",{attrs:{title:e.fields.uuid?"编辑银行卡":"新增银行卡"}}),e._v(" "),n("ModalBody",{attrs:{align:"left"}},[n("el-form",{ref:"form",staticClass:"sdf-form sdf-modal-form",attrs:{model:e.fields,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"银行账户名",prop:"accountName",required:""}},[n("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fields.accountName,expression:"fields.accountName"}],staticClass:"middle",domProps:{value:e.fields.accountName},on:{input:function(t){e.fields.accountName=t}}})]),e._v(" "),n("el-form-item",{attrs:{label:"银行账户号",prop:"accountNo",required:""}},[n("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fields.accountNo,expression:"fields.accountNo"}],staticClass:"middle",domProps:{value:e.fields.accountNo},on:{input:function(t){e.fields.accountNo=t}}})]),e._v(" "),n("el-form-item",{attrs:{label:"开户行",prop:"bankCode",required:""}},[n("el-select",{directives:[{name:"model",rawName:"v-model",value:e.fields.bankCode,expression:"fields.bankCode"}],staticClass:"middle",attrs:{clearable:""},domProps:{value:e.fields.bankCode},on:{input:function(t){e.fields.bankCode=t}}},e._l(e.bankNames,function(e){return n("el-option",{attrs:{label:e.value,value:e.key}})}))]),e._v(" "),n("el-form-item",{attrs:{label:"开户行所在地",required:""}},[n("select-address",[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{prop:"provinceCode",required:""}},[n("select-province",{directives:[{name:"model",rawName:"v-model",value:e.fields.provinceCode,expression:"fields.provinceCode"}],domProps:{value:e.fields.provinceCode},on:{input:[function(t){e.fields.provinceCode=t},function(t){e.fields.province=arguments[1]}]}})])]),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{prop:"cityCode",required:""}},[n("select-city",{directives:[{name:"model",rawName:"v-model",value:e.fields.cityCode,expression:"fields.cityCode"}],attrs:{"province-code":e.fields.provinceCode},domProps:{value:e.fields.cityCode},on:{input:[function(t){e.fields.cityCode=t},function(t){e.fields.city=arguments[1]}]}})])])])])])]),e._v(" "),n("ModalFooter",[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"success",loading:e.submitting},on:{click:e.submit}},[e._v("确定")])])])},staticRenderFns:[]}}});