webpackJsonp([20,23],{749:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),s=i(n),r=a(1);t.default={data:function(){return{pageConds:{perPageRecordNumber:12,pageIndex:1,page:1,pageNumber:12},fields:{uuid:"",name:"",description:""},rules:{name:[{required:!0,message:"请输入标签名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],description:{max:200,trigger:"blur",message:"长度不要超过200个字符"}},uploading:!1,dataSource:{list:[],size:0}}},computed:{action:function(){return"/tag/detail/query"},filterDataSource:function(){return this.dataSource.list.map(function(e){return Object.assign({deleted:!1},e)})}},watch:{"pageConds.pageIndex":function(){this.pageConds.page=this.pageConds.pageIndex,this.fetch()}},activated:function(){this.fetchDetail(this.$route.params.id),this.fetch()},methods:{fetch:function(){var e=this;(0,r.ajaxPromise)({url:this.action,data:Object.assign({},{uuid:this.$route.params.id},this.pageConds)}).then(function(t){e.dataSource.list=t.list,e.dataSource.size=t.size}).catch(function(e){s.default.open(e)})},fetchDetail:function(e){var t=this;(0,r.ajaxPromise)({url:"/tag/detail?uuid="+e}).then(function(e){t.fields=e.tag}).catch(function(e){s.default.open(e)})},handleClickCancel:function(){new Promise(function(e,t){window.history.back(),e()}).then(function(){s.default.close()})},handleClickSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.uploading=!0;var a=e.filterDataSource.filter(function(e){return e.deleted}).map(function(e){return e.uuid});(0,r.ajaxPromise)({url:"tag/edit-tag",data:{uuid:e.fields.uuid,name:e.fields.name,description:e.fields.description,deleteUuids:JSON.stringify(a)},type:"post"}).then(function(e){s.default.open("编辑标签成功！"),setTimeout(function(){window.history.back()},1e3)}).catch(function(e){s.default.open(e)}).then(function(){e.uploading=!1})}})},tableRowClassName:function(e,t){return e.deleted?"deleted":""}}}},1234:function(e,t){},1624:function(e,t,a){var i,n;a(1234),i=a(749);var s=a(1822);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,e.exports=i},1822:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content",attrs:{id:"tagManageDetail"}},[a("div",{staticClass:"scroller"},[a("Breadcrumb",{attrs:{routes:[{title:"编辑标签"}]}}),e._v(" "),a("el-form",{ref:"form",staticClass:"sdf-form",staticStyle:{margin:"40px 0 40px 118px"},attrs:{rules:e.rules,model:e.fields,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{staticClass:"form-item-legend",staticStyle:{padding:"5px 0"},attrs:{label:"标签信息"}}),e._v(" "),a("el-form-item",{attrs:{label:"标签名称",prop:"name",required:""}},[a("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fields.name,expression:"fields.name"}],staticClass:"long",attrs:{size:"middle"},domProps:{value:e.fields.name},on:{input:function(t){e.fields.name=t}}}),e._v(" "),a("div",{staticStyle:{"font-size":"11px",color:"#666666","line-height":"24px"}},[e._v("1~20个字符，区分大小写")])]),e._v(" "),a("el-form-item",{attrs:{label:"标签描述",prop:"description"}},[a("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fields.description,expression:"fields.description"}],staticClass:"long",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"200字符以内"},domProps:{value:e.fields.description},on:{input:function(t){e.fields.description=t}}})])]),e._v(" "),a("div",{staticClass:"block margin"},[a("h5",{staticClass:"hd"},[e._v("数据标签")]),e._v(" "),a("div",{staticClass:"bd"},[a("el-table",{staticClass:"td-15-padding th-8-15-padding no-th-border",attrs:{data:e.filterDataSource,"row-class-name":e.tableRowClassName,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"单据编号",prop:"outerIdentifier"}}),e._v(" "),a("el-table-column",{attrs:{label:"单据类型",prop:"typeCn"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.row.deleted=!e.row.deleted}}},[e._v(e._s(e.row.deleted?"添加":" 删除 "))])},staticRenderFns:[]}})])]),e._v(" "),a("div",{staticClass:"ft text-align-center"},[a("PageControl",{directives:[{name:"model",rawName:"v-model",value:e.pageConds.pageIndex,expression:"pageConds.pageIndex"}],attrs:{size:e.dataSource.size,"per-page-record-number":e.pageConds.perPageRecordNumber},domProps:{value:e.pageConds.pageIndex},on:{input:function(t){e.pageConds.pageIndex=t}}})])]),e._v(" "),a("div",{staticClass:"block margin"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleClickCancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loding:e.uploading},on:{click:e.handleClickSubmit}},[e._v("提交")])])])])},staticRenderFns:[]}}});