webpackJsonp([12,23],{5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),n=a(1),i=function(e,t){var a={};return Object.keys(t).forEach(function(o){if(e.hasOwnProperty(o)){var n=t[o];if("string"==typeof n&&""!==n)try{/^\[[\s\S]*\]$/.test(n)&&(n=JSON.parse(n))}catch(e){}a[o]=n}}),a};t.default={data:function(){return{listenConditionChange:!1}},computed:{conditions:function(){var e=(0,n.filterQueryConds)(this.queryConds);return Object.assign({},e,this.comboConds,this.sortConds,this.pageConds)},filterConds:function(){return Object.assign({},this.queryConds,this.comboConds)}},watch:{initializing:function(e){e?this.initializeLoading=this.$loading({text:"正在初始化",target:this.$el}):this.initializeLoading&&this.initializeLoading.close()}},activated:function(){this.disableGlobalQueryCache=!0,this.setRouteQueryListener(),this.initializing||this.setChangeListener(),this.initializing||this.equalTo((0,n.purify)(this.lastRouteQuery),(0,n.purify)(this.$route.query))||(this.disableGlobalQueryCache?this.extractFromQuery(this.mergeDefaultQuery(this.$route.query)):this.extractFromQuery(this.mergeDefaultQuery(this.$store.state.query,this.$route.query)),this.dataSource.list=[],this.dataSource.size=0,this.dataSource.error="",this.dataSource.fetching=!1,(this.autoload!==!1||this.existRouteQueryExceptTimestamp())&&this.fetch())},deactivated:function(){this.unsetRouteQueryListener(),this.unsetChangeListener()},beforeRouteLeave:function(e,t,a){this.disableGlobalQueryCache||this.$store.commit(o.SET_CACHE_QUERY,JSON.parse(JSON.stringify(this.conditions))),this.lastRouteQuery=this.$route.query,a()},methods:{unsetRouteQueryListener:function(){"function"==typeof this.unwatchRouteQuery&&this.unwatchRouteQuery(),this.unwatchRouteQuery=null},setRouteQueryListener:function(){var e=this;this.unwatchRouteQuery||(this.unwatchRouteQuery=this.$watch("$route.query",function(t,a){e.dataSource.list=[],e.dataSource.size=0,e.dataSource.error="",e.dataSource.fetching=!1,e.extractFromQuery(e.mergeDefaultQuery(t))}))},unsetChangeListener:function(){"function"==typeof this.unwatchConditions&&this.unwatchConditions(),this.unwatchConditions=null,"function"==typeof this.unwatchFilterConds&&this.unwatchFilterConds(),this.unwatchFilterConds=null,"function"==typeof this.unwatchSortConds&&this.unwatchSortConds(),this.unwatchSortConds=null,"function"==typeof this.unwatchPageConds&&this.unwatchPageConds(),this.unwatchPageConds=null},setChangeListener:function(){var e=this;setTimeout(function(){e.unwatchConditions||(e.unwatchConditions=e.$watch("conditions",function(t,a){e.previousConditions=a},{deep:!0})),e.listenConditionChange===!1||e.unwatchFilterConds||(e.unwatchFilterConds=e.$watch("filterConds",function(){e.pageConds&&(e.pageConds.pageIndex=1),e.fetch()},{deep:!0})),e.sortConds&&!e.unwatchSortConds&&(e.unwatchSortConds=e.$watch("sortConds",function(t,a){e.fetch()},{deep:!0})),e.pageConds&&!e.unwatchPageConds&&(e.unwatchPageConds=e.$watch("pageConds",function(t,a){e.fetch()},{deep:!0}))},0)},_initialize:function(){var e=this;this.initializing=!0,this.initialize().then(function(){e.$refs.lookup&&e.$refs.lookup.$on("click",function(){e.pageConds&&(e.pageConds.pageIndex=1),e.fetch()}),e.defaultConditions=Object.assign({},e.conditions),e.disableGlobalQueryCache?e.extractFromQuery(e.mergeDefaultQuery(e.$route.query)):e.extractFromQuery(e.mergeDefaultQuery(e.$store.state.query,e.$route.query)),e.initializing=!1,e.$emit("ready")})},onSortChange:function(e){var t=(e.column,e.prop),a=e.order;this.sortConds.sortField=t,this.sortConds.isAsc=a},mergeDefaultQuery:function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this.defaultConditions),e.unshift({}),Object.assign.apply(Object,e)},mergeLastQuery:function(){},extractFromQuery:function(e){this.pageConds&&(this.pageConds=Object.assign({},this.pageConds,i(this.pageConds,e))),this.queryConds&&(this.queryConds=Object.assign({},this.queryConds,i(this.queryConds,e))),this.comboConds&&(this.comboConds=Object.assign({},this.comboConds,i(this.comboConds,e))),this.sortConds&&(this.sortConds=Object.assign({},this.sortConds,i(this.sortConds,e)))}}}},1861:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"scroller"},[a("div",{staticClass:"query-area"},[a("el-form",{staticClass:"sdf-form sdf-query-form",attrs:{inline:!0}},[a("el-form-item",[a("el-select",{directives:[{name:"model",rawName:"v-model",value:e.queryConds.customerStyleOrdinal,expression:"queryConds.customerStyleOrdinal"}],attrs:{size:"small",placeholder:"客户类型"},domProps:{value:e.queryConds.customerStyleOrdinal},on:{change:function(t){e.queryConds.idTypeOrdinal=""},input:function(t){e.queryConds.customerStyleOrdinal=t}}},e._l(e.customerStyle,function(e){return a("el-option",{attrs:{label:e.value,value:e.key}})}))]),e._v(" "),a("el-form-item",[a("el-select",{directives:[{name:"model",rawName:"v-model",value:e.queryConds.idTypeOrdinal,expression:"queryConds.idTypeOrdinal"}],attrs:{size:"small",clearable:"",placeholder:"证件类型"},domProps:{value:e.queryConds.idTypeOrdinal},on:{input:function(t){e.queryConds.idTypeOrdinal=t}}},e._l(e.idTypes,function(e){return a("el-option",{attrs:{label:e.value,value:e.key}})}))]),e._v(" "),a("el-form-item",[a("el-select",{directives:[{name:"model",rawName:"v-model",value:e.queryConds.customerStatus,expression:"queryConds.customerStatus"}],attrs:{size:"small",placeholder:"客户状态",clearable:""},domProps:{value:e.queryConds.customerStatus},on:{input:function(t){e.queryConds.customerStatus=t}}},e._l(e.customerStatus,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))]),e._v(" "),a("el-form-item",[a("ComboQueryBox",{directives:[{name:"model",rawName:"v-model",value:e.comboConds,expression:"comboConds"}],domProps:{value:e.comboConds},on:{input:function(t){e.comboConds=t}}},[a("el-option",{attrs:{value:"customerName",label:"贷款客户姓名"}}),e._v(" "),a("el-option",{attrs:{value:"customerUuid",label:"贷款客户编号"}})])]),e._v(" "),a("el-form-item",[a("el-button",{ref:"lookup",attrs:{size:"small",type:"primary"}},[e._v("查询")])]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.exportModal.show=!0}}},[e._v("导出")])])])]),e._v(" "),a("div",{staticClass:"table-area"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataSource.fetching,expression:"dataSource.fetching"}],staticClass:"no-table-bottom-border",attrs:{stripe:"",data:e.dataSource.list}},[a("el-table-column",{attrs:{width:"180",label:"客户编号"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.row.status?a("a",{attrs:{href:e.ctx+"#/financial/customer/loan-customer/"+e.row.customerUuid+"/detail?customerStyle="+e.row.customerStyle}},[e._v(e._s(e.row.customerUuid))]):a("span",[e._v(e._s(e.row.customerUuid))]),e._v(" ")])},staticRenderFns:[]}}),e._v(" "),a("el-table-column",{attrs:{label:"客户名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户类型",prop:"customerStyle"}}),e._v(" "),a("el-table-column",{attrs:{label:"证件类型",prop:"idType"}}),e._v(" "),a("el-table-column",{attrs:{label:"证件号",prop:"idNumber"}}),e._v(" "),a("el-table-column",{attrs:{label:"银行账号",prop:"accountNo"}}),e._v(" "),a("el-table-column",{attrs:{label:"账户开户行",prop:"bankName"}}),e._v(" "),a("el-table-column",{attrs:{label:"开户行所在省",prop:"province"}}),e._v(" "),a("el-table-column",{attrs:{label:"开户行所在市",prop:"city"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},inlineTemplate:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.row.status?a("span",[e._v("正常")]):a("span",{staticStyle:{color:"red"}},[e._v("异常")]),e._v(" ")])},staticRenderFns:[]}})])])]),e._v(" "),a("div",{staticClass:"operations"},[a("div",{staticClass:"pull-right"},[a("PageControl",{directives:[{name:"model",rawName:"v-model",value:e.pageConds.pageIndex,expression:"pageConds.pageIndex"}],attrs:{size:e.dataSource.size,"per-page-record-number":e.pageConds.perPageRecordNumber},domProps:{value:e.pageConds.pageIndex},on:{input:function(t){e.pageConds.pageIndex=t}}})])]),e._v(" "),a("ExportPreviewModal",{directives:[{name:"model",rawName:"v-model",value:e.exportModal.show,expression:"exportModal.show"}],attrs:{parameters:e.conditions,"query-action":"/customer/preview-exprot-customer","download-action":"/customer/export",handlerExport:!0},domProps:{value:e.exportModal.show},on:{handlerExport:e.handlerExport,input:function(t){e.exportModal.show=t}}},[a("el-table-column",{attrs:{prop:"customerUuid",label:"客户编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"客户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerStyle",label:"客户类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idType",label:"证件类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idNumber",label:"证件号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountNo",label:"银行账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankName",label:"账户开户行"}}),e._v(" "),a("el-table-column",{attrs:{prop:"province",label:"开户行所在省"}}),e._v(" "),a("el-table-column",{attrs:{prop:"city",label:"开户行所在市"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusMsg",label:"状态"}})])])},staticRenderFns:[]}},1558:function(e,t,a){var o,n;o=a(678);var i=a(1861);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(n=o=o.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,e.exports=o},678:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),i=o(n),s=a(5),r=o(s),l=a(1),u=a(2),c=o(u);t.default={mixins:[i.default,r.default],components:{ComboQueryBox:a(6),ExportPreviewModal:a(33)},data:function(){return{action:"/customer/search",pageConds:{perPageRecordNumber:12,pageIndex:1},queryConds:{customerStyleOrdinal:"",idTypeOrdinal:"",customerStatus:!0},comboConds:{customerName:"",customerUuid:""},customerStyle:[],IDType:[],customerStatus:[{label:"正常",value:!0},{label:"异常",value:!1}],exportModal:{show:!1}}},activated:function(){this.initialize()},computed:{idTypes:function(){var e=this.IDType;return 0===this.queryConds.customerStyleOrdinal?e.slice(0,5):1===this.queryConds.customerStyleOrdinal?e.slice(5):e}},methods:{initialize:function(){return this.getOptions()},getOptions:function(){var e=this;return(0,l.ajaxPromise)({url:"/customer/optionData"}).then(function(t){e.customerStyle=t.customerStyle||[],e.IDType=t.IDType||[]}).catch(function(e){c.default.open(e)})},handlerExport:function(){var e=Object.assign({},this.queryConds,this.comboConds);(0,l.ajaxPromise)({url:"/customer/export/limit",data:(0,l.purify)(e)}).then(function(t){(0,l.downloadFile)("/customer/export",e)}).catch(function(e){c.default.open(e)})}}}},23:function(e,t){},22:function(e,t){"use strict";function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){var t,a,o="";Object.keys(e).some(function(o){var n=e[o];if(null!=n&&""!=n)return t=o,a=n,!0});return{activeKey:t,activeValue:a,iconClose:o}};t.default={props:{value:{required:!0,type:Object}},data:function(){return o(this.value)},watch:{activeKey:function(e){this.activeValue&&this.$emit("input",a({},this.activeKey,this.activeValue))},activeValue:function(e){this.activeKey&&this.$emit("input",a({},this.activeKey,this.activeValue))},value:function(e){var t=o(e),a=t.activeKey,n=t.activeValue;a&&(this.activeKey=a),this.activeValue=n}},methods:{handleChange:function(e){this.iconClose=e?"close":"",this.activeValue=e}}}},6:function(e,t,a){var o,n;a(23),o=a(22);var i=a(24);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(n=o=o.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,e.exports=o},24:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-input",{staticClass:"combo-query-box",attrs:{value:e.activeValue,size:"small",icon:e.iconClose,placeholder:"请输入内容"},on:{change:e.handleChange,click:function(t){e.activeValue=""}}},[a("el-select",{directives:[{name:"model",rawName:"v-model",value:e.activeKey,expression:"activeKey"}],staticClass:"short",attrs:{placeholder:"请选择"},domProps:{value:e.activeKey},on:{input:function(t){e.activeKey=t}},slot:"prepend"},[e._t("default")],!0)])},staticRenderFns:[]}},33:function(e,t,a){var o,n;a(91),o=a(85);var i=a(106);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(n=o=o.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,e.exports=o},106:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{directives:[{name:"model",rawName:"v-model",value:e.visible,expression:"visible"}],staticClass:"export-modal",domProps:{value:e.visible},on:{input:function(t){e.visible=t}}},[a("ModalHeader",{attrs:{title:e.title}}),e._v(" "),a("ModalBody",{directives:[{name:"loading",rawName:"v-loading",value:e.dataSource.fetching,expression:"dataSource.fetching"}]},[a("div",{staticClass:"row-layout-detail"},[a("div",{staticClass:"block"},[a("div",{staticClass:"bd"},[e.pagination?a("PagingTable",{attrs:{pagination:e.pagination,perPageRecordNumber:12,data:e.dataSource.list}},[e._t("default")],!0):a("el-table",{staticClass:"td-15-padding th-8-15-padding",staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:e.dataSource.list}},[e._t("default")],!0),e._v(" ")])])]),e._v(" "),a("div",{staticStyle:{height:"20px"}},[e.canExportTags?a("el-checkbox",{directives:[{name:"model",rawName:"v-model",value:e.exportTags,expression:"exportTags"}],staticClass:"pull-left",staticStyle:{"margin-left":"20px"},domProps:{value:e.exportTags},on:{input:function(t){e.exportTags=t}}},[e._v("导出标签")]):e._e()])]),e._v(" "),a("ModalFooter",[a("el-button",{attrs:{type:"default"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{disabled:0===e.dataSource.list.length,type:"success"},on:{click:e.download}},[e._v("下载")])])])},staticRenderFns:[]}},85:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),i=a(2),s=(o(i),a(4)),r=o(s),l=a(14),u=o(l);t.default={mixins:[r.default],components:{PagingTable:u.default},props:{value:Boolean,queryAction:{required:!0,type:String},downloadAction:{required:!0,type:String},parameters:{default:function(){return{}}},autoload:{default:!1},pagination:{default:!1},handlerExport:{default:!1},canExportTags:{default:!1},title:{default:"导出预览"}},watch:{visible:function(e){this.$emit("input",e),e&&(this.exportTags=!1,this.fetch())},value:function(e){this.visible=e},queryAction:function(e){this.action=e}},data:function(){return{fetching:!1,visible:this.value,exportTags:!1}},methods:{fetch:function(){this.visible&&this.getData({url:this.queryAction,data:this.parameters})},download:function(){var e;e=this.canExportTags?Object.assign(this.parameters,{exportTags:this.exportTags}):this.parameters,this.handlerExport?this.$emit("handlerExport"):(0,n.downloadFile)(this.downloadAction,e)}}}},91:function(e,t){},57:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"bd"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"td-15-padding th-8-15-padding no-th-border",attrs:{data:e.showList,stripe:"",border:""}},[e._t("default")],!0)]),e._v(" "),e.pagination&&e.data&&e.data.length>e.perPageRecordNumber?a("div",{staticClass:"ft text-align-center",staticStyle:{"margin-bottom":"15px"}},[a("PageControl",{directives:[{name:"model",rawName:"v-model",value:e.pageIndex,expression:"pageIndex"}],attrs:{size:e.data.length,"per-page-record-number":e.perPageRecordNumber},domProps:{value:e.pageIndex},on:{input:function(t){e.pageIndex=t}}})]):e._e()])},staticRenderFns:[]}},48:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{data:{type:Array,default:function(){}},perPageRecordNumber:{default:5,type:Number},pagination:{default:!1},loading:{default:!1}},watch:{data:function(){this.pageIndex=1}},computed:{showList:function(){var e=this.pageIndex,t=this.perPageRecordNumber,a=this.pagination,o=(e-1)*t,n=o+t;return a&&this.data?this.data.slice(o,n):this.data}},data:function(){return{pageIndex:1}}}},14:function(e,t,a){var o,n;a(56),o=a(48);var i=a(57);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(n=o=o.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,e.exports=o},56:function(e,t){}});