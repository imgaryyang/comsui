define(function(require,exports,module){var t=jQuery,i=_,e=['<div class="modal-dialog">','    <div class="modal-content">','        <div class="modal-header">','            <button type="button" class="close close-dialog" data-dismiss="modal">',"                <span>&times;</span>","            </button>",'            <h4 class="modal-title" id="dialoglabel">{%= title || \'提示\' %}</h4>',"        </div>",'        <div class="modal-body">',"            <div class=\"inner\" style=\"{%= !isHtml ? 'margin: 50px 0;' : ''%}\">","                {%= message %}","            </div>","        </div>",'        <div class="modal-footer">',"            {% _.each(buttons, function(btn, index) { %}",'                <button type="button" class="btn {%= btn.id %} btn-{%= btn.style || \'default\' %}">',"                    {%= btn.text || '关闭' %}","                </button>","            {% }) %}","        </div>","    </div>","</div>"].join(""),n=Backbone.View.extend({template:i.template(e),tagName:"div",className:"modal fade",attributes:{role:"dialog",tabindex:"-1"},events:{"shown.bs.modal":"onShown","hidden.bs.modal":"onHidden"},initialize:function(i){this.primitiveEvents=this.events,this.$el.modal(t.extend({show:!1},i))},isHtml:function(i){var e=t("<div>");return e.html(i),e.children().length>0},onShown:function(){this.trigger("shown")},onHidden:function(){this.trigger("hidden"),this.$el.detach()},show:function(){var e,n,s,d=this.constructor;if(2 in arguments?(s=arguments[2],n=arguments[1],e=arguments[0]):1 in arguments?(s=d.BUTTONS,n=arguments[1],e=arguments[0]):0 in arguments?(s=d.BUTTONS,n=d.TITLE,e=arguments[0]):(s=d.BUTTONS,n=d.TITLE,e=d.MESSAGE),s&&s.length>0){var l,a,o={};for(a=0;a<s.length;a++)l=s[a],l.id=i.uniqueId("btn-"),o["click ."+l.id]=l.handler;this.delegateEvents(t.extend(this.primitiveEvents,o))}var h=this.template({message:e,title:n,buttons:s,isHtml:this.isHtml(e)});this.$el.html(h).modal("show")},hide:function(){this.$el.modal("hide")}});n.TITLE="提示",n.MESSAGE="系统繁忙请稍候重试",n.BUTTONS=[{text:"关闭",style:"default",handler:function(){this.hide()}}],module.exports=new n});