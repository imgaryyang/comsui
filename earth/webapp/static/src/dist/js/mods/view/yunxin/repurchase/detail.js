define(function(require,exports,module){var e=require("scaffold/util"),i=require("component/popupTip"),t=require("./repurchase-model").RepurchaseModel,l=require("baseView/baseFormView"),o=l.FormDialogView,n=Backbone.View.extend({el:".content",events:{"click .activate":"onClickActivate","click .nullify":"onClickNullify","click .default":"onClickDefault"},initialize:function(e){this.model=new t({rduid:e}),this.listenTo(this.model,"nullify:success activate:success",this.handlerAjax)},handlerAjax:function(t){0!=t.code?i.show(_.isEmpty(t.message)?t:t.message):e.delayReload(0)},onClickActivate:function(){this.model.activate()},onClickNullify:function(){this.model.set("type","nullify");var e=new s({model:this.model});e.show()},onClickDefault:function(e){e.preventDefault(),this.model.set("type","default");var i=new s({model:this.model});i.show()}}),s=o.extend({template:_.template($("#confirmDialog").html()||"",{variable:"obj"}),initialize:function(){s.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"model:default",function(e){0==e.code?(this.close(),i.show("操作成功"),setTimeout(function(){location.reload()},1e3)):i.show(e.message)})},submitHandler:function(){"default"==this.model.type?this.model.default():this.model.nullify()}});module.exports=n});