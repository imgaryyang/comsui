define(function(require,exports,module){var o=(require("component/popupTip"),require("baseView/tableContent")),t=require("baseView/baseFormView").FormDialogView,a=jQuery,e=global_config.root,n=t.extend({className:"modal fade form-modal large-form-modal in",template:_.template(a("#batchLoanInfoTmpl").html(),{variable:"data"}),action:{confirmLoan:e+" "},submitHandler:function(){}}),i=o.extend({initialize:function(){i.__super__.initialize.apply(this,arguments),this.$showPopover=a(".statistical-amount"),this.listenTo(this,"show-popover:amountStatistics",this.showAmountStatisticsPopover)},events:{"click #batchLoan":"onClickBatchLoan","click .icon-bankcard":"onClickBankcard","mouseover .showPopover":"showPopover","mouseout .showPopover":"showPopover"},action:{batchLoan:e+"",amountStatistics:e+"/remittance/plan/amountStatistics"},showAmountStatisticsPopover:function(o){o&&this.queryAmountStatistics()},queryAmountStatistics:function(){var o=this.collectParams(),t={type:"post",dataType:"json",url:this.action.amountStatistics,data:o};t.success=function(o){var t=this.$showPopover.data("bs.popover");if(0==o.code){var a=0;_.isEmpty(o.data)||(a=o.data.plannedAmount.formatMoney(2,""));var e='<div><span class="text-muted">执行金额:</span>'+a+"</div>";t.options.content=e}else t.options.content=o.message;this.$showPopover.popover("show")}.bind(this),a.ajax(t)},showPopover:function(o){o.preventDefault();var t=a(o.target),e=t.siblings(".account").html();t.popover({content:e}),t.popover("toggle")},onClickBankcard:function(o){o.preventDefault(),this.showPopover(o);var t=a(o.target);return t.on("shown.bs.popover",function(){a("body").find(".popover").last().addClass("clickShow")}),t.on("hide.bs.popover",function(){t.removeClass("active")}),t.on("hidden.bs.popover",function(){t.removeClass("active")}),t.toggleClass("active"),!1},onClickBatchLoan:function(o){o.preventDefault();var t=new n;t.show()}});module.exports=i});